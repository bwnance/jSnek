!function(e){var t={};function s(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(r,i,function(t){return e[t]}.bind(null,i));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=1)}([function(e,t){class s{constructor(e,t){this.x=e,this.y=t}eq(e){return e.x===this.x&&e.y===this.y}plus(e){return new s(e.x+self.x,e.y+self.y)}plusArr(e){return new s(this.x+e[0],this.y+e[1])}clone(){return new s(this.x,this.y)}}e.exports=s},function(e,t,s){const r=s(2);$(()=>{const e=$(".snake");new r(e).startGame()})},function(e,t,s){const r=s(3),i=s(4);e.exports=class{constructor(e){this.$el=e}startGame(){this.snake=new i,this.board=new r(this.snake,this.$el),this.setupBoard();let e=this.gameLoop.bind(this);this.intervalId=setInterval(e,100);let t=this.onKey.bind(this);this.board.addApple(),this.addKeyHandler(t),this.score=0,this.displayScore(),setTimeout(()=>$("#start-game")[0].play(),10)}setupBoard(){this.board.initBoard()}onKey(e){37==e.keyCode?this.snake.turn("W"):39==e.keyCode?this.snake.turn("E"):38==e.keyCode?this.snake.turn("N"):40==e.keyCode&&this.snake.turn("S")}displayScore(){$(".scoreboard").remove();let e=$("<h1></h1>");e.addClass("scoreboard"),e.append("Score: ").append(this.score),this.$el.append(e)}gameLoop(){this.snake.move()?(null==this.snake.applePos&&(this.board.addApple(),this.score+=1,$("#apple-eat")[0].play(),this.displayScore()),null!==this.snake.newSegment&&(this.board.updateGridClass(this.snake.newSegment,"snakeGrid"),this.snake.newSegment=null),null!==this.snake.removedSegment&&(this.board.updateGridClass(this.snake.removedSegment,"nothing"),this.snake.removedSegment=null)):this.endGame()}addKeyHandler(e){$("html").keydown(e)}removeKeyHandler(){$("html").off("keydown")}restartGame(e){e.keyCode&&(this.$el.empty(),$(".gameover-message").remove(),this.removeKeyHandler(),this.startGame())}endGame(){$("#gameover")[0].play(),this.removeKeyHandler(),clearTimeout(this.intervalId);let e=$("<h1></h1>"),t=$("body");e.append("You Lose!<br>Press any key to restart.").addClass("gameover-message"),t.append(e);let s=this.restartGame.bind(this);this.addKeyHandler(s)}}},function(e,t,s){const r=s(0);e.exports=class{constructor(e,t){this.snake=e,this.$el=t,this.grid=[],this.gridSize=15}randomNum(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}updateGridClass(e,t){let s=this.getFromPos(e);if(s.removeClass("snakeGrid nothing apple").addClass(t),s.css("border-radius",0),s.empty(),e.eq(this.snake.head)){let e=$("<div></div>");e.append("^.^"),e.addClass("snake-face"),s.append(e),s.css("border","3px solid white")}if("snakeGrid"===t){let e=$("li");e.each(t=>{let s=$(e[t]);this.snake.head.eq(s.data("pos"))||(s.empty(),s.css("border","0"))})}}resetGridClass(e){this.updateGridClass(e,"nothing")}addAppleClass(e){let t=this.getFromPos(e);t.removeClass("snakeGrid nothing apple").addClass("apple"),t.css("border-radius",50)}initBoard(){let e=$("<ul></ul>");e.addClass("board");for(let t=0;t<this.gridSize;t++){this.grid[t]=this.grid[t]||[];for(let s=0;s<this.gridSize;s++){let i=$("<li></li>"),a=new r(t,s);i.data("pos",a),i.addClass("pixel"),this.setAtPos(a,i),e.append(i)}}this.$el.append(e)}getFromPos(e){return this.grid[e.x][e.y]}setAtPos(e,t){this.grid[e.x][e.y]=t}addApple(){let e=new r(this.randomNum(0,this.gridSize-1),this.randomNum(0,this.gridSize-1));for(;this.getFromPos(e).hasClass("snakeGrid");)e=new r(this.randomNum(0,this.gridSize-1),this.randomNum(0,this.gridSize-1));this.addAppleClass(e),this.snake.applePos=e}}},function(e,t,s){const r=s(0);e.exports=class{constructor(){this.directions={N:[-1,0],S:[1,0],E:[0,1],W:[0,-1]},this.segments=[new r(7,8)],this.head=this.segments[0],this.currentDir="N",this.maxLength=1,this.newSegment=null,this.removedSegment=null,this.turnQueue=[],this.gameover=!1,this.applePos=null}randomNum(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}_turn(e){let t=null;if("E"===e)switch(this.currentDir){case"N":t="E";break;case"E":break;case"S":t="E"}else if("W"===e)switch(this.currentDir){case"N":t="W";break;case"E":break;case"S":t="W"}else if("N"===e)switch(this.currentDir){case"N":break;case"E":t="N";break;case"S":break;case"W":t="N"}else if("S"===e)switch(this.currentDir){case"N":break;case"E":t="S";break;case"S":break;case"W":t="S"}if(t){let e=this.randomNum(0,2);$(".move-noise")[e].play(),this.currentDir=t}}turn(e){this.turnQueue.length>2&&this.turnQueue.shift(),this.turnQueue.push(e)}move(){this._turn(this.turnQueue.shift());let e=this.directions[this.currentDir],t=this.head.clone();return t=t.plusArr(e),!(!this.isOnBoard(t)||this.isSnake(t)||(t.x===this.applePos.x&&t.y===this.applePos.y&&(this.applePos=null,this.maxLength+=2),this.newSegment=t,this.segments.unshift(t),this.segments.length>this.maxLength&&(this.updateHead(),this.removedSegment=this.segments.pop()),this.updateHead(),0))}isSnake(e){let t=!1;return this.segments.forEach(s=>{e.x===s.x&&s.y===e.y&&(t=!0)}),console.log(t),t}isOnBoard(e){return e.x>=0&&e.x<15&&e.y>=0&&e.y<15}updateHead(){this.head=this.segments[0]}}}]);